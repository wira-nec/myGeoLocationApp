<div class="wrapper">
  <div *ngIf="!!error">
    Sorry, position is not avalibale: {{ error.message }}
  </div>
  <div class="watch-position">
    <div class="switch-container">
      <label for="switcher" class="switch-container__text">
        Track my position
      </label>
      <label class="switch">
        <input
          id="switcher"
          type="checkbox"
          checked="[toggle]"
          (click)="toggleWatch()"
        />
        <span class="slider round"></span>
      </label>
    </div>
    <div *ngIf="!!toggle && (geolocation$ | async) as geolocation">
      <app-map
        *ngIf="geolocation.coords"
        [coordinatesChange]="geolocation.coords"
      ></app-map>
    </div>
  </div>
  <div class="current-position" *ngIf="!toggle">
    <button class="primary-button" (click)="getCurrentPosition()">
      Get my position!
    </button>

    <iframe
      *ngIf="!!currentPositionUrl"
      width="425"
      height="350"
      frameborder="0"
      scrolling="no"
      marginheight="0"
      marginwidth="0"
      [src]="currentPositionUrl"
    ></iframe>
  </div>
</div>

<router-outlet />
